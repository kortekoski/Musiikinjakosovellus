<!DOCTYPE html>
<head>
    <meta charset="utf-8">
</head>
<body>
{% include "loginbox.html" %}

<h2>{{ track.name }}</h2>
<!-- TODO: fetch the different versions from the database. -->
<!-- The different versions of the track will hopefully have their own tabs here. -->
<audio controls src="/play/{{ track.id }}"></audio>

<h3>Description</h3>
<p>{{ track.description }}</p>

<h3>Comments</h3>
<!-- If there are comments for the track, they are listed here. -->
<!-- TODO: Make the comments look better. Maybe have them in boxes?-->
{% if comments %}
<ul>
{% for comment in comments %}
    <li>{{ comment.content }} -<i>{{ comment.username }}</i> ({{ comment.date.ctime() }})
    {% if comment.user_id == session.userid %}
        <form action="/editcomment/{{ comment.id }}" method="GET">
            <input type="submit" value="Edit">
        </form>
        <form action="/removecomment/{{ comment.id }}" method="DELETE">
            <input type="submit" value="Delete">
        </form>
    {% elif session.admin == True %}
        <form action="/removecomment/{{ comment.id }}" method="DELETE">
            <input type="submit" value="Delete">
        </form>
    {% endif %}
{% endfor %}
</ul>
{% else %}
<p>No comments yet. Leave one below!</p>
{% endif %}
{% if session.username %}
<form action="/comment/{{ track.id }}" method="POST">
    <textarea id="newcomment" name="newcomment" rows="5" cols="40"></textarea><br>
    <input type="submit" value="Send">
</form>
{% else %}
<i>Log in to leave a comment.</i>
{% endif %}
</body>